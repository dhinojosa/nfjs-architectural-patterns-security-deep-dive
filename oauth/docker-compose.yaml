version: '3.8'
services:
    keycloak:
        image: quay.io/keycloak/keycloak:latest
        environment:
            - KEYCLOAK_ADMIN=admin
            - KEYCLOAK_ADMIN_PASSWORD=admin
        command: start-dev --http-port 8080
        ports:
            - "8080:8080"

    spring-app:
        build:
            context: .
        ports:
            - "8081:8081"
        environment:
            - SPRING_PROFILES_ACTIVE=default
        depends_on:
            - keycloak
